{"version":3,"sources":["webpack:///./src/assets/user_image.jpg","webpack:///src/view/Ranking.vue","webpack:///./src/view/Ranking.vue?af14","webpack:///./src/view/Ranking.vue"],"names":["module","exports","__webpack_require__","p","Ranking","name","data","action_id","listData","start","end","page","mounted","this","localStorage","getItem","undefined","$route","params","pid","setItem","getRanking","document","title","methods","onVote_loading","$toast","self","$axios","get","vote_id","then","res","console","log","code","length","concat","msg","onRanking","id","$router","push","onLoading","view_Ranking","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","staticStyle","padding","text-align","color","font-size","_s","Date","toLocaleString","_l","item","index","key","attrs","src","user_image","alt","user_name","workName","domProps","textContent","sort_id","vote_num","last_num","innerHTML","user_intro","rank","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.a914dcc92a449e5a5ce6.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/user_image.fcf2b01.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/user_image.jpg\n// module id = TgPP\n// module chunks = 1 4","<template>\n  <div>\n    <div class=\"vote-box\" @click=\"onVote_loading()\">集赞榜</div>\n    <div style=\"padding: 5px 0;text-align:center;color:#333;font-size:12px;\">\n      {{new Date().toLocaleString() }}\n    </div>\n    <div class=\"list\">\n      <div class=\"item\" v-for=\"(item, index) in listData\" :key='index' @click=\"onRanking(item.id)\">\n        <div class=\"item-img\">\n          <img v-if=\"item.user_image\" :src=\"item.user_image\" alt=\"\">\n          <img v-else src=\"../assets/user_image.jpg\" alt=\"\">\n        </div>\n        <div class=\"item-content\">\n          <div class=\"item-user\">{{item.user_name}} {{item.workName}} <span v-text=\"item.sort_id\"></span> 号</div>\n          <div style=\"font-size:14px;\">赞数 <span v-text=\"item.vote_num\"></span></div>\n          <div>距离上一名还差 <span v-text=\"item.last_num\"></span> 赞</div>\n          <div v-html=\"item.user_intro\"></div>\n        </div>\n        <div class=\"item-right\">\n          <div>\n            <template v-if=\"index < 3\">\n              <b style=\"color:red;\" v-text=\"item.rank\"></b> <span> /NO</span>\n            </template>\n            <template v-else>\n              <b v-text=\"item.rank\"></b><span> /NO</span>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"loading\" @click=\"onLoading\">加载更多</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ranking\",\n  data() {\n    return {\n      action_id: 0,\n      listData: \"\",\n      start: 1,\n      end: 10,\n      page: 1\n    };\n  },\n  mounted() {\n    let self = this;\n\n    self.action_id = localStorage.getItem('ranking_id');\n    if (self.$route.params.pid !== undefined) {\n      self.action_id = self.$route.params.pid;\n      localStorage.setItem('ranking_id', self.action_id);\n    }\n\n    self.getRanking();\n    document.title = \"排行榜\";\n  },\n  methods: {\n    onVote_loading() {\n      this.getRanking();\n      this.$toast(\"刷新成功\");\n    },\n    // 获取活动中作品列表\n    // 获取排行榜\n    getRanking() {\n      let self = this;\n      this.$axios\n        .get(\"/api/event/rank\", {\n          params: {\n            vote_id: localStorage.getItem('ranking_id'),\n            start: self.start,\n            page: self.page,\n            end: self.end\n          }\n        })\n        .then(function (res) {\n          console.log(res.data);\n          if (res.code === 1) {\n            if (res.data.length <= 0) {\n              self.$toast('暂无更多作品');\n              --self.page\n              return false;\n            }\n            if (self.page >= 2) {\n              self.listData = self.listData.concat(res.data);\n            } else {\n              self.listData = res.data;\n            }\n          } else {\n            self.$toast(res.msg);\n            --self.page\n          }\n        });\n    },\n    onRanking(id) {\n      this.$router.push({ name: \"detail\", params: { id: id } });\n    },\n    onLoading() {\n      this.page++\n      this.getRanking();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.vote-box {\n  width: 100%;\n  padding: 10px 0;\n  color: #f05a28;\n  border-bottom: 1px solid #f05a28;\n  background-color: #f8f8f8;\n  text-align: center;\n}\n\n@keyframes slidein {\n  from {\n    transform: rotate3d(1, 1, 1, 25deg);\n  }\n  to {\n    transform: rotate3d(0);\n  }\n}\n\n.list {\n  padding: 8px;\n}\n\n.item {\n  display: grid;\n  grid-template-columns: 70px auto 45px;\n  box-shadow: 0 5px 8px #ddd;\n  padding: 8px;\n  border-radius: 5px;\n  font-size: 12px;\n  color: #444;\n  margin-bottom: 1rem;\n  min-height: 100px;\n  transform-origin: bottom left;\n  animation: slidein 0.5s;\n  overflow: hidden;\n}\n\n.item:nth-child(1) {\n  color: #fff;\n  background-image: linear-gradient(135deg, #feb692 10%, #ea5455 100%);\n}\n.item:nth-child(2) {\n  color: #fff;\n  background-image: linear-gradient(135deg, #fccf31 10%, #f55555 100%);\n}\n.item:nth-child(3) {\n  color: #fff;\n  background-image: linear-gradient(135deg, #90f7ec 10%, #32ccbc 100%);\n}\n\n.item:nth-child(1) .item-user {\n  color: #fff;\n}\n.item:nth-child(2) .item-user {\n  color: #fff;\n}\n.item:nth-child(3) .item-user {\n  color: #fff;\n}\n\n.item:nth-child(1) .item-img {\n  background-image: url(\"../assets/king.png\");\n  background-repeat: no-repeat;\n  background-size: 60px;\n  background-position: 5px 0;\n}\n\n.item:nth-child(2) .item-img {\n  background-image: url(\"../assets/king2.png\");\n  background-repeat: no-repeat;\n  background-size: 60px;\n  background-position: 5px 0;\n}\n\n.item:nth-child(3) .item-img {\n  background-image: url(\"../assets/king3.png\");\n  background-repeat: no-repeat;\n  background-size: 60px;\n  background-position: 5px 0;\n}\n\n.item-img {\n  display: flex;\n  align-items: center;\n}\n\n.item-img img {\n  margin: 0 auto;\n  border: 1px solid #fff;\n  width: 58px;\n  height: 58px;\n  border-radius: 100%;\n  background-color: #fff;\n  box-sizing: border-box;\n}\n\n.item-content {\n  padding: 0 8px;\n  line-height: 1.8;\n}\n\n.item-content div:first-child {\n  color: #333;\n  font-size: 16px;\n  line-height: 1.6;\n}\n\n.item-right {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.item-right b {\n  font-size: 1.45rem;\n  align-self: flex-start;\n}\n\n.loading {\n  padding: 20px 0;\n  text-align: center;\n  color: #999;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/Ranking.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"vote-box\",on:{\"click\":function($event){return _vm.onVote_loading()}}},[_vm._v(\"集赞榜\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"padding\":\"5px 0\",\"text-align\":\"center\",\"color\":\"#333\",\"font-size\":\"12px\"}},[_vm._v(\"\\n    \"+_vm._s(new Date().toLocaleString())+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"list\"},_vm._l((_vm.listData),function(item,index){return _c('div',{key:index,staticClass:\"item\",on:{\"click\":function($event){return _vm.onRanking(item.id)}}},[_c('div',{staticClass:\"item-img\"},[(item.user_image)?_c('img',{attrs:{\"src\":item.user_image,\"alt\":\"\"}}):_c('img',{attrs:{\"src\":require(\"../assets/user_image.jpg\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-content\"},[_c('div',{staticClass:\"item-user\"},[_vm._v(_vm._s(item.user_name)+\" \"+_vm._s(item.workName)+\" \"),_c('span',{domProps:{\"textContent\":_vm._s(item.sort_id)}}),_vm._v(\" 号\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"赞数 \"),_c('span',{domProps:{\"textContent\":_vm._s(item.vote_num)}})]),_vm._v(\" \"),_c('div',[_vm._v(\"距离上一名还差 \"),_c('span',{domProps:{\"textContent\":_vm._s(item.last_num)}}),_vm._v(\" 赞\")]),_vm._v(\" \"),_c('div',{domProps:{\"innerHTML\":_vm._s(item.user_intro)}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-right\"},[_c('div',[(index < 3)?[_c('b',{staticStyle:{\"color\":\"red\"},domProps:{\"textContent\":_vm._s(item.rank)}}),_vm._v(\" \"),_c('span',[_vm._v(\" /NO\")])]:[_c('b',{domProps:{\"textContent\":_vm._s(item.rank)}}),_c('span',[_vm._v(\" /NO\")])]],2)])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"loading\",on:{\"click\":_vm.onLoading}},[_vm._v(\"加载更多\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-49f32370\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/Ranking.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-49f32370\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Ranking.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Ranking.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Ranking.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-49f32370\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Ranking.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-49f32370\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/Ranking.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}