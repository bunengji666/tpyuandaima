webpackJsonp([14],{"4ml/":function(t,e){},IcnI:function(t,e,n){"use strict";var o=n("7+uW"),a=n("NYxO"),i=n("lbHh"),r=n.n(i);o.a.use(a.a);var l=new a.a.Store({state:{token:r.a.get("token"),beforeLoginUrl:r.a.get("beforeLoginUrl"),count:0,active:0,pid:1,works_id:0,db:null,notice_text:"",default_img:"../assets/default.png"},mutations:{set_token:function(t,e){t.token=e},set_notice_text:function(t,e){t.notice_text=e},set_db:function(t,e){t.db=e},set_beforeLoginUrl:function(t,e){t.beforeLoginUrl=e},set_active:function(t,e){t.active=e},set_pid:function(t,e){t.pid=e},set_works_id:function(t,e){t.works_id=e}}});e.a=l},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("//Fk"),a=n.n(o),i=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")({name:"App"},r,!1,function(t){n("WiOq")},null,null).exports,s=n("/ocq"),c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"app-main"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1),t._v(" "),n("van-tabbar",{attrs:{"active-color":"#ff5959",fixed:""},model:{value:t.$store.state.active,callback:function(e){t.$set(t.$store.state,"active",e)},expression:"$store.state.active"}},[n("van-tabbar-item",{attrs:{icon:"home-o",to:{name:"works",params:{pid:t.$store.state.pid}}}},[t._v("首页")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"records",to:{name:"apply",params:{pid:t.$store.state.pid}}}},[t._v("报名")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"notes-o",to:{name:"intro",params:{pid:t.$store.state.pid}}}},[t._v("活动介绍")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"user-o",to:{name:"prize",params:{pid:t.$store.state.pid}}}},[t._v("活动奖品")])],1)],1)},staticRenderFns:[]};var u=n("VU/8")({name:"layout",data:function(){return{activeData:null}},mounted:function(){this.$store.commit("set_pid",this.$route.params.pid)}},c,!1,function(t){n("abGE")},"data-v-6e801960",null).exports;i.a.use(s.a);var p=new s.a({linkActiveClass:"router-link-active",routes:[{path:"/",name:"index",hidden:!0,component:function(){return n.e(3).then(n.bind(null,"J91o"))},meta:{title:"首页"}},{path:"/login",name:"login",hidden:!0,component:function(){return n.e(9).then(n.bind(null,"qzG6"))},meta:{title:"登陆"}},{path:"/home/:pid",component:u,children:[{path:"",name:"works",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"4Aof"))},meta:{title:"活动主页"}},{path:"apply",name:"apply",component:function(){return n.e(7).then(n.bind(null,"Oslt"))},meta:{title:"报名"}},{path:"intro",name:"intro",component:function(){return n.e(6).then(n.bind(null,"cPnN"))},meta:{title:"活动简介"}},{path:"prize",name:"prize",component:function(){return n.e(12).then(n.bind(null,"/fbW"))},meta:{title:"活动奖品"}}]},{path:"/detail/:id",name:"detail",hidden:!0,component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"OuCh"))},meta:{title:"作品详情"}},{path:"/ranking",hidden:!0,name:"ranking",component:function(){return n.e(4).then(n.bind(null,"UxzZ"))},meta:{title:"票榜"}},{path:"/gem/:works_id",hidden:!0,name:"gem",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"lNlT"))},meta:{title:"礼物助力"}},{path:"/complain",hidden:!0,name:"complain",component:function(){return n.e(8).then(n.bind(null,"BqMa"))},meta:{title:"投诉"}},{path:"/buy/:id",hidden:!0,name:"buy",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"Y/vm"))},meta:{title:"抢购"}},{path:"*",name:"404",component:function(){return n.e(11).then(n.bind(null,"d7Yn"))},hidden:!0}]});p.beforeEach(function(t,e,n){var o=t.fullPath.split("/"),a=localStorage.getItem("token");if(console.log("to-----------------\x3e",t),console.log("to-----------------\x3e",e),!a&&"login"!=o[1])return console.log("login"),localStorage.setItem("beforeUrl",t.fullPath),n("/login"),!1;if("login"==o[1]&&"token"==o[2]){localStorage.setItem("token",o[3]);var i=localStorage.getItem("beforeUrl");console.log(i);var r="/";return i&&(r=i.split("/")),""!=i&&null!=i&&"login"!=r[1]||(i="/"),n(i),!1}n()});var m=p,d=n("IcnI"),f=n("Fd2+"),h=(n("4ml/"),n("mtWM")),v=n.n(h),b=n("mw3O"),g=n.n(b),_=n("Rf8U"),k=n.n(_),w=n("28Ui"),$=n.n(w),x=n("lbHh"),y=n.n(x);i.a.use(f.b),i.a.use(k.a,v.a),i.a.use($.a),v.a.defaults.baseURL="http://www.ycylyj.cn/",v.a.interceptors.request.use(function(t){var e=localStorage.getItem("token");return console.log(e),e&&(t.headers.token=e),t},function(t){return a.a.reject(t)}),v.a.interceptors.response.use(function(t){return 900===t.data.code&&(localStorage.removeItem("token"),console.log("需要重新登录"),m.push({name:"login"})),t.data},function(t){return a.a.reject(t)}),i.a.prototype.$axios=v.a,i.a.prototype.qs=g.a,i.a.prototype.$Cookies=y.a,i.a.config.productionTip=!1,new i.a({el:"#app",router:m,store:d.a,components:{App:l},template:"<App/>"})},WiOq:function(t,e){},abGE:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.653868470b1dfa56be01.js.map