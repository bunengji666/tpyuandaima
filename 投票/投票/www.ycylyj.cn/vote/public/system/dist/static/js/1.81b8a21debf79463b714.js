webpackJsonp([1],{"+yK4":function(t,e){},"3HLG":function(t,e){},"5+/y":function(t,e){},IiyH:function(t,e){t.exports="data:image/png;base64,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"},OuCh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),o=a.n(i),n=a("exGp"),s=a.n(n),r=a("Fd2+"),c={name:"personal",props:["data"],mounted:function(){console.log(this.data)}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{padding:"8px 14px",color:"#666"}},[i("div",{staticClass:"userInfo"},[i("div",{staticClass:"userInfo-img"},[t.data.user_image?i("img",{staticStyle:{width:"65px",height:"65px"},attrs:{src:t.data.user_image,alt:""}}):i("img",{staticStyle:{width:"65px",height:"65px"},attrs:{src:a("TgPP"),alt:""}})]),t._v(" "),i("div",{staticClass:"userInfo-content"},[i("div",{domProps:{innerHTML:t._s(t.data.user_name?t.data.user_name:"用户名称")}}),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.data.user_intro)}})])])]),t._v(" "),i("van-row",[i("van-panel",{attrs:{title:"活动介绍"}}),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.data.desc)}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,l,!1,function(t){a("+yK4")},null,null).exports,u={name:"show",props:["data"],mounted:function(){console.log(this.data)}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{padding:"8px 0","line-height":"28px",color:"#666"}},[t.data.video_url?a("div",{staticClass:"video"},[a("video",{staticStyle:{width:"100%"},attrs:{height:"240",controls:""}},[a("source",{attrs:{src:t.data.video_url,type:"video/mp4"}}),t._v("\n\t\t\t\t您的浏览器不支持Video标签。\n\t\t\t")])]):t._e(),t._v(" "),t.data.images?a("div",t._l(t.data.images,function(t,e){return a("div",{key:e},[a("img",{staticStyle:{width:"100%"},attrs:{src:t,alt:""}})])}),0):t._e(),t._v(" "),a("van-row",[a("van-panel",{attrs:{title:"活动展示"}})],1),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.data.content)}})],1)])},staticRenderFns:[]};var p=a("VU/8")(u,v,!1,function(t){a("5+/y")},"data-v-4ccd5116",null).exports,g=a("rASa"),m={name:"detail",components:{Personal:d,ShowPage:p},data:function(){return{music_url:"../static/music.mp3",music_play:!0,notice_text:"",detail_id:0,active:0,tabActive:0,detailData:[],imgLink:"",likeColor:0,Color1:"#ff0b55",Color2:"#ccc",show:!1,gift_url:"../static/gift.jpg",is_show:!1,showPopup:!1,qrcode:"",posterImg:"",painting:{}}},mounted:function(){this.detail_id=this.$route.params.id,this.getDetail()},methods:{success:function(t){this.posterImg=t,console.log("海报生成成功")},fail:function(t){console.log("fail",t)},clickShare:function(){var t=this;if(console.log("点击分享按钮"),r.a.loading({message:"分享海报生成中,请稍等...",forbidClick:!0}),""!==t.posterImg)return r.a.clear(),t.showPopup=!0,!1;console.log("正在生成海报..."),t.createPoster(),setTimeout(function(){r.a.clear(),t.showPopup=!0},1e3)},createPoster:function(){var t=this.detailData.share_title,e=this.detailData.share_image,a=window.location.href;console.log("进入生成海报方法"),console.log(t),console.log(e),console.log(a),console.log("载入海报数据"),this.painting={width:320,height:500,views:[{type:"rect",top:0,left:0,background:"#f4f5f7",width:320,height:500,radius:4},{type:"text",content:t,color:"#333333",fontSize:14,top:20,left:20,width:280,lineHeight:20,breakWord:!0,MaxLineNumber:2},{type:"image",url:e,left:20,top:60,width:280,height:400,radius:4},{type:"qrcode",content:a,background:"#fff",color:"#000",top:360,left:200,width:100,height:100},{type:"text",content:"长按识别二维码开始加油吧",fontSize:12,color:"#999999",top:460,left:150}]}},onClickComplain:function(){this.$router.push({name:"complain"})},onClickPlay:function(){var t=document.getElementsByTagName("Audio")[0];t.paused?(t.play(),this.music_play=!0):(t.pause(),this.music_play=!1)},go_home:function(){this.$router.push({name:"works",params:{pid:this.detailData.vote_id}})},go_ranking:function(){this.$router.push({name:"ranking",params:{pid:this.detailData.vote_id}})},onTapApply:function(){this.$router.push({name:"apply",params:{pid:this.detailData.vote_id}}),this.$store.commit("set_active",1)},onTapGem:function(){if(!this.is_time())return!1;this.$router.push({name:"gem",params:{works_id:this.detailData.id}})},beforeClose:function(t,e){"confirm"===t?e():"cancel"===t&&e()},vote_btn:function(){if(!this.is_time())return!1;var t=this;this.$axios.post("/api/event/vote",{works_id:t.detail_id,vote_id:t.detailData.vote_id}).then(function(e){1==e.code?(t.getDetail(),t.$toast(e.msg),t.show=!0,t.likeColor=!0):t.$toast(e.msg)}).catch(function(t){console.log(t)})},getDetail:function(){var t=this;return s()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t,t.$axios.get("/api/event/get_works_info",{params:{id:a.$route.params.id}}).then(function(t){if(1==t.code){a.detailData=t.data,a.likeColor=t.data.is_vote,a.imgLink=t.data.images;var e=t.data.event;""!==e.music_file&&(a.music_url=e.music_file,a.notice_text=e.notice_text),document.title=a.detailData.share_title,g.a.share(a.detailData.share_title,a.detailData.share_desc,a.detailData.share_image),a.is_time()&&(a.is_show=!0)}else a.$toast("请求错误,数据返回失败!!")});case 2:case"end":return e.stop()}},e,t)}))()},is_time:function(){var t=this.detailData.event,e=new Date,a=1e3*parseInt(t.start_time),i=1e3*parseInt(t.end_time);return e.getTime()<a?(this.$toast("活动尚未开始"),!1):!(e.getTime()>i)||(this.$toast("活动已结束"),!1)}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-notice-bar",{attrs:{text:t.notice_text,"left-icon":"volume-o"}}),t._v(" "),i("div",{staticStyle:{display:"flex","background-color":"#fff",padding:"18px 0","text-align":"center"}},[i("div",{staticStyle:{flex:"1"},on:{click:function(e){return t.onTapApply()}}},[t._v("我也要报名")]),t._v(" "),i("div",{staticStyle:{flex:"1"},on:{click:function(e){return t.go_ranking()}}},[t._v("集赞榜")])]),t._v(" "),i("van-row",{staticStyle:{padding:"18px 0","text-align":"center","background-color":"#f0f5f9"},attrs:{type:"flex",justify:"center"}},[i("van-col",{attrs:{span:"8"}},[i("van-row",[t._v("排名")]),t._v(" "),i("van-row",[i("span",{domProps:{textContent:t._s(t.detailData.rank)}},[t._v("查看排名")])])],1),t._v(" "),i("van-col",{attrs:{span:"8"}},[i("van-row",[t._v("赞数")]),t._v(" "),i("van-row",[i("span",{domProps:{textContent:t._s(t.detailData.vote_num)}},[t._v("0")])])],1),t._v(" "),i("van-col",{attrs:{span:"8"}},[i("van-row",[t._v("热度")]),t._v(" "),i("van-row",[i("span",{domProps:{textContent:t._s(t.detailData.hot_num)}},[t._v("0")])])],1)],1),t._v(" "),i("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tab",{attrs:{title:"展示"}},[i("ShowPage",{attrs:{data:t.detailData}})],1),t._v(" "),i("van-tab",{attrs:{title:"个人资料"}},[i("personal",{attrs:{data:t.detailData}})],1)],1),t._v(" "),i("div",{staticClass:"vote_tab"},[i("div",{staticClass:"vote_tab_item",on:{click:function(e){return t.go_home()}}},[t._v("首页")]),t._v(" "),i("div",{staticClass:"vote_tab_item"},[i("div",{staticClass:"vote_like",on:{click:function(e){return t.vote_btn()}}},[i("van-icon",{attrs:{name:"like",size:"50px",color:t.likeColor?t.Color1:t.Color2}}),t._v(" "),i("div",[t._v("为Ta集赞")])],1)]),t._v(" "),t.is_show?i("div",{staticClass:"vote_tab_item",on:{click:function(e){return t.onTapGem()}}},[t._v("礼物助力")]):i("div",{staticClass:"vote_tab_item",on:{click:function(e){return t.go_ranking()}}},[t._v("集赞榜")])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"music-box"},[i("div",{staticClass:"music-tools",on:{click:function(e){return t.onClickPlay()}}},[i("audio",{attrs:{src:t.music_url,autoplay:""}}),t._v(" "),i("img",{class:{rotate_music:t.music_play},staticStyle:{width:"100%"},attrs:{src:a("IiyH"),alt:""}})])]),t._v(" "),i("div",{staticClass:"complain-box",on:{click:function(e){return t.onClickComplain()}}},[t._v("投诉")]),t._v(" "),i("van-dialog",{attrs:{confirmButtonText:"知道了",beforeClose:t.beforeClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("img",{attrs:{src:t.gift_url},on:{click:function(e){return t.onTapGem()}}}),t._v(" "),i("div",{staticStyle:{"text-align":"center",padding:"8px 0","font-size":"16px"}},[t._v("集赞成功")])]),t._v(" "),i("div",{staticClass:"share_btn",on:{click:function(e){return t.clickShare()}}},[i("van-icon",{attrs:{name:"share",size:"32px"}})],1),t._v(" "),i("van-popup",{style:{width:"320px",height:"520px",background:"none"},attrs:{round:""},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[i("img",{attrs:{src:t.posterImg,alt:""}})]),t._v(" "),i("vue-canvas-poster",{attrs:{painting:t.painting},on:{success:t.success,fail:t.fail}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("br")])}]};var f=a("VU/8")(m,_,!1,function(t){a("3HLG")},"data-v-21fdb116",null);e.default=f.exports},TgPP:function(t,e,a){t.exports=a.p+"static/img/user_image.fcf2b01.jpg"}});
//# sourceMappingURL=1.81b8a21debf79463b714.js.map