{"version":3,"sources":["webpack:///src/view/Apply.vue","webpack:///./src/view/Apply.vue?d551","webpack:///./src/view/Apply.vue"],"names":["Apply","name","data","formData","title","vote_id","images","content","mobile","user_intro","user_name","video_url","img_list","mounted","document","methods","onSubmit","self","this","inputData","console","log","$toast","length","$store","state","pid","join","$axios","post","then","res","code","msg","$router","push","params","onRead","file","detail","param","FormData","append","headers","Content-Type","url","catch","err","view_Apply","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","label","placeholder","maxlength","model","value","callback","$$v","$set","expression","_v","type","rows","autosize","staticStyle","text-align","padding","_l","item","key","width","src","alt","after-read","size","color","_e","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.b5c4016b88b24a9b65a1.js","sourcesContent":["<template>\n  <div>\n    <div class=\"form\" onSubmit=\"false\">\n      <van-cell-group>\n        <van-field v-model=\"formData.title\" label=\"作品名称\" placeholder=\"请输入作品名称(选填)\" maxlength=\"10\" />\n        <van-field v-model=\"formData.mobile\" type=\"number\" label=\"手机号码\" placeholder=\"请输入手机号码(选填)\" maxlength=\"11\" />\n        <van-field v-model=\"formData.user_name\" label=\"你的姓名\" placeholder=\"请输入你的姓名(必填)\" maxlength=\"10\" />\n        <van-field v-model=\"formData.user_intro\" label=\"自我介绍\" type=\"textarea\" placeholder=\"请输入自我介绍(选填)\" rows=\"1\" autosize maxlength=\"150\" />\n        <van-field v-model=\"formData.content\" label=\"作品简介\" type=\"textarea\" placeholder=\"请输入作品简介(选填)\" rows=\"1\" autosize maxlength=\"150\" />\n        <van-field v-model=\"formData.video_url\" label=\"作品视频\" placeholder=\"请输入视频地址(选填)\" />\n      </van-cell-group>\n      <van-panel title=\"图片上传(必填)\">\n        <div style=\"text-align:center;padding: 14px;\">\n          <div>\n            <p v-for=\"item of img_list\" :key=\"item\">\n              <img style=\"width: 100%;\" :src=\"item\" alt=\"\">\n            </p>\n          </div>\n          <p>\n            <van-uploader v-if=\"img_list.length < 3\" name=\"uploader\" :after-read=\"onRead\">\n              <van-icon name=\"add-o\" size=\"30px\" color=\"#ddd\" />\n            </van-uploader>\n          </p>\n\n        </div>\n      </van-panel>\n      <br>\n      <div style=\"text-align:center;\">\n        <van-button type=\"primary\" @click=\"onSubmit()\" style=\"width: 92%;\">确认提交</van-button>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"apply\",\n  data() {\n    return {\n      formData: {\n        'title': '',\n        'vote_id': '',\n        'images': '',\n        'content': '',\n        'mobile': '',\n        'user_intro': '',\n        'user_name': '',\n        'video_url': ''\n      },\n      img_list: []\n    };\n  },\n  mounted() {\n    document.title = '活动报名';\n  },\n  methods: {\n    onSubmit() {\n      let self = this;\n      let inputData = this.formData;\n      console.log(inputData.images);\n\n      if (this.user_name == '') {\n        self.$toast('必填项不能为空')\n        return false;\n      }\n      if (this.img_list.length <= 0) {\n        self.$toast('作品图片不能没有哦')\n        return false;\n      }\n      inputData.vote_id = this.$store.state.pid;\n      inputData.images = this.img_list.join(',');\n      console.log(inputData);\n      this.$axios.post(\"/api/event/add_works\", inputData)\n        .then(function (res) {\n          console.log(res);\n          if (res.code == 1) {\n            self.$toast(res.msg);\n            self.$router.push({ name: \"home\", params: { pid: this.$store.state.pid } });\n          } else {\n            self.$toast(res.msg);\n          }\n        });\n    },\n    // 读入图片信息\n    onRead(file, detail) {\n      let self = this;\n      console.log(file);\n      let param = new FormData();\n      param.append('image', file.file);  //append 向form表单添加数据\n      //添加请求头  通过form添加的图片和文件的格式必须是multipart/form-data\n      let config = {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      };\n      self.$axios.post(\"/api/common/upload\", param, config)\n        .then((res) => {\n          if (res.code == 1) {\n            console.log(res.data.url);\n            console.log(self.formData);\n            self.$toast(res.msg);\n            self.img_list.push(res.data.url);\n          } else {\n            self.$toast(res.msg);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n    }\n  }\n};\n</script>\n\n<style scoped>\n.form {\n  font-size: 14px;\n  box-sizing: border-box;\n  /* padding: 10px 14px; */\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/Apply.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"form\",attrs:{\"onSubmit\":\"false\"}},[_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"作品名称\",\"placeholder\":\"请输入作品名称(选填)\",\"maxlength\":\"10\"},model:{value:(_vm.formData.title),callback:function ($$v) {_vm.$set(_vm.formData, \"title\", $$v)},expression:\"formData.title\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"type\":\"number\",\"label\":\"手机号码\",\"placeholder\":\"请输入手机号码(选填)\",\"maxlength\":\"11\"},model:{value:(_vm.formData.mobile),callback:function ($$v) {_vm.$set(_vm.formData, \"mobile\", $$v)},expression:\"formData.mobile\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"你的姓名\",\"placeholder\":\"请输入你的姓名(必填)\",\"maxlength\":\"10\"},model:{value:(_vm.formData.user_name),callback:function ($$v) {_vm.$set(_vm.formData, \"user_name\", $$v)},expression:\"formData.user_name\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"自我介绍\",\"type\":\"textarea\",\"placeholder\":\"请输入自我介绍(选填)\",\"rows\":\"1\",\"autosize\":\"\",\"maxlength\":\"150\"},model:{value:(_vm.formData.user_intro),callback:function ($$v) {_vm.$set(_vm.formData, \"user_intro\", $$v)},expression:\"formData.user_intro\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"作品简介\",\"type\":\"textarea\",\"placeholder\":\"请输入作品简介(选填)\",\"rows\":\"1\",\"autosize\":\"\",\"maxlength\":\"150\"},model:{value:(_vm.formData.content),callback:function ($$v) {_vm.$set(_vm.formData, \"content\", $$v)},expression:\"formData.content\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"作品视频\",\"placeholder\":\"请输入视频地址(选填)\"},model:{value:(_vm.formData.video_url),callback:function ($$v) {_vm.$set(_vm.formData, \"video_url\", $$v)},expression:\"formData.video_url\"}})],1),_vm._v(\" \"),_c('van-panel',{attrs:{\"title\":\"图片上传(必填)\"}},[_c('div',{staticStyle:{\"text-align\":\"center\",\"padding\":\"14px\"}},[_c('div',_vm._l((_vm.img_list),function(item){return _c('p',{key:item},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":item,\"alt\":\"\"}})])}),0),_vm._v(\" \"),_c('p',[(_vm.img_list.length < 3)?_c('van-uploader',{attrs:{\"name\":\"uploader\",\"after-read\":_vm.onRead}},[_c('van-icon',{attrs:{\"name\":\"add-o\",\"size\":\"30px\",\"color\":\"#ddd\"}})],1):_vm._e()],1)])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('van-button',{staticStyle:{\"width\":\"92%\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit()}}},[_vm._v(\"确认提交\")])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-636fb584\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/Apply.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-636fb584\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Apply.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Apply.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Apply.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-636fb584\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Apply.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-636fb584\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/Apply.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}