webpackJsonp([7],{"1Lll":function(t,e){},Oslt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"apply",data:function(){return{formData:{title:"",vote_id:"",images:"",content:"",mobile:"",user_intro:"",user_name:"",video_url:""},img_list:[]}},mounted:function(){document.title="活动报名"},methods:{onSubmit:function(){var t=this,e=this.formData;return console.log(e.images),""==this.user_name?(t.$toast("必填项不能为空"),!1):this.img_list.length<=0?(t.$toast("作品图片不能没有哦"),!1):(e.vote_id=this.$store.state.pid,e.images=this.img_list.join(","),console.log(e),void this.$axios.post("/api/event/add_works",e).then(function(e){console.log(e),1==e.code?(t.$toast(e.msg),t.$router.push({name:"home",params:{pid:this.$store.state.pid}})):t.$toast(e.msg)}))},onRead:function(t,e){var a=this;console.log(t);var o=new FormData;o.append("image",t.file);a.$axios.post("/api/common/upload",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){1==t.code?(console.log(t.data.url),console.log(a.formData),a.$toast(t.msg),a.img_list.push(t.data.url)):a.$toast(t.msg)}).catch(function(t){console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form",attrs:{onSubmit:"false"}},[a("van-cell-group",[a("van-field",{attrs:{label:"作品名称",placeholder:"请输入作品名称(选填)",maxlength:"10"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),t._v(" "),a("van-field",{attrs:{type:"number",label:"手机号码",placeholder:"请输入手机号码(选填)",maxlength:"11"},model:{value:t.formData.mobile,callback:function(e){t.$set(t.formData,"mobile",e)},expression:"formData.mobile"}}),t._v(" "),a("van-field",{attrs:{label:"你的姓名",placeholder:"请输入你的姓名(必填)",maxlength:"10"},model:{value:t.formData.user_name,callback:function(e){t.$set(t.formData,"user_name",e)},expression:"formData.user_name"}}),t._v(" "),a("van-field",{attrs:{label:"自我介绍",type:"textarea",placeholder:"请输入自我介绍(选填)",rows:"1",autosize:"",maxlength:"150"},model:{value:t.formData.user_intro,callback:function(e){t.$set(t.formData,"user_intro",e)},expression:"formData.user_intro"}}),t._v(" "),a("van-field",{attrs:{label:"作品简介",type:"textarea",placeholder:"请输入作品简介(选填)",rows:"1",autosize:"",maxlength:"150"},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}}),t._v(" "),a("van-field",{attrs:{label:"作品视频",placeholder:"请输入视频地址(选填)"},model:{value:t.formData.video_url,callback:function(e){t.$set(t.formData,"video_url",e)},expression:"formData.video_url"}})],1),t._v(" "),a("van-panel",{attrs:{title:"图片上传(必填)"}},[a("div",{staticStyle:{"text-align":"center",padding:"14px"}},[a("div",t._l(t.img_list,function(t){return a("p",{key:t},[a("img",{staticStyle:{width:"100%"},attrs:{src:t,alt:""}})])}),0),t._v(" "),a("p",[t.img_list.length<3?a("van-uploader",{attrs:{name:"uploader","after-read":t.onRead}},[a("van-icon",{attrs:{name:"add-o",size:"30px",color:"#ddd"}})],1):t._e()],1)])]),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("van-button",{staticStyle:{width:"92%"},attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("确认提交")])],1)],1)])},staticRenderFns:[]};var n=a("VU/8")(o,l,!1,function(t){a("1Lll")},"data-v-636fb584",null);e.default=n.exports}});
//# sourceMappingURL=7.b5c4016b88b24a9b65a1.js.map